{"version":3,"sources":["../../src/controller/truck.js"],"names":["config","db","api","post","req","res","newTruck","TruckName","name","body","save","err","send","json","message","get","find","trucks","console","log","findById","params","id","truck","put","delete","status","remove","_id"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;kBAEc,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AAChC,MAAIC,MAAM,sBAAV;;AAEA;AACA;AACA;AACAA,MAAIC,IAAJ,CAAS,MAAT,EAAiB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7B,QAAIC,WAAW,IAAIC,mBAAJ,EAAf;AACAD,aAASE,IAAT,GAAgBJ,IAAIK,IAAJ,CAASD,IAAzB;;AAEAF,aAASI,IAAT,CAAc,eAAO;AACnB,UAAIC,GAAJ,EAAQ;AACNN,YAAIO,IAAJ,CAASD,GAAT;AACD;AACDN,UAAIQ,IAAJ,CAAS,EAACC,SAAS,0BAAV,EAAT;AACD,KALD;AAMD,GAVD;;AAYA;AACA;AACAZ,MAAIa,GAAJ,CAAQ,GAAR,EAAa,UAACX,GAAD,EAAMC,GAAN,EAAc;AACzBE,wBAAUS,IAAV,CAAe,EAAf,EAAmB,UAACL,GAAD,EAAMM,MAAN,EAAiB;AAClC,UAAIN,GAAJ,EAAS;AACPN,YAAIO,IAAJ,CAASD,GAAT;AACD;AACDN,UAAIQ,IAAJ,CAASI,MAAT;AACAC,cAAQC,GAAR,CAAYF,MAAZ;AACD,KAND;AAOD,GARD;;AAUA;AACA;AACAf,MAAIa,GAAJ,CAAQ,MAAR,EAAgB,UAACX,GAAD,EAAMC,GAAN,EAAc;AAC5BE,wBAAUa,QAAV,CAAmBhB,IAAIiB,MAAJ,CAAWC,EAA9B,EAAkC,UAACX,GAAD,EAAMY,KAAN,EAAgB;AAChD,UAAIZ,GAAJ,EAAS;AACPN,YAAIO,IAAJ,CAASD,GAAT;AACD;AACDN,UAAIQ,IAAJ,CAASU,KAAT;AACD,KALD;AAMD,GAPD;;AAUA;AACA;AACA;AACArB,MAAIsB,GAAJ,CAAQ,aAAR,EAAuB,UAACpB,GAAD,EAAMC,GAAN,EAAc;AACnCE,wBAAUa,QAAV,CAAmBhB,IAAIiB,MAAJ,CAAWC,EAA9B,EAAkC,UAACX,GAAD,EAAMY,KAAN,EAAgB;AAChD,UAAIZ,GAAJ,EAAS;AACPN,YAAIO,IAAJ,CAASD,GAAT;AACD;AACDY,YAAMf,IAAN,GAAaJ,IAAIK,IAAJ,CAASD,IAAtB;;AAEAe,YAAMb,IAAN,CAAW,eAAO;AAChB,YAAIC,GAAJ,EAAS;AACPN,cAAIO,IAAJ,CAASD,GAAT;AACD;AACDN,YAAIQ,IAAJ,CAAS,EAACC,SAAS,iCAAV,EAAT;AACD,OALD;AAMD,KAZD;AAaD,GAdD;;AAgBA;AACA;AACA;AACAZ,MAAIuB,MAAJ,CAAW,MAAX,EAAmB,UAACrB,GAAD,EAAMC,GAAN,EAAc;AAC/BE,wBAAUa,QAAV,CAAmBhB,IAAIiB,MAAJ,CAAWC,EAA9B,EAAkC,UAACX,GAAD,EAAMY,KAAN,EAAgB;AAChD,UAAIZ,GAAJ,EAAS;AACPN,YAAIqB,MAAJ,CAAW,GAAX,EAAgBd,IAAhB,CAAqBD,GAArB;AACA;AACD;AACD,UAAIY,UAAU,IAAd,EAAoB;AAClBlB,YAAIqB,MAAJ,CAAW,GAAX,EAAgBd,IAAhB,CAAqBD,GAArB;AACA;AACD;AACDJ,0BAAUoB,MAAV,CAAiB;AACfC,aAAKxB,IAAIiB,MAAJ,CAAWC;AADD,OAAjB,EAEG,UAACX,GAAD,EAAMJ,SAAN,EAAoB;AACrB,YAAII,GAAJ,EAAS;AACPN,cAAIO,IAAJ,CAASD,GAAT;AACD;AACDN,YAAIQ,IAAJ,CAAS,EAACC,SAAS,4BAAV,EAAT;AACD,OAPD;AAQD,KAjBD;AAkBD,GAnBD;;AAsBA,SAAOZ,GAAP;AAED,C","file":"truck.js","sourcesContent":["import mongoose from 'mongoose';\nimport { Router } from 'express'\nimport TruckName from '../model/truckName'\nimport bodyParser from 'body-parser';\nimport passport from 'passport';\n\nimport { authenticate } from '../middleware/authMiddleware';\n\nexport default({ config, db }) => {\n  let api = Router();\n\n  // '/v1/truck/add' - Create\n  // This function will add a new truck to the DB.\n  // TODO: I'VE DISABLED AUTH TEMP, DON'T FORGET TO ENABLE\n  api.post('/add', (req, res) => {\n    let newTruck = new TruckName();\n    newTruck.name = req.body.name;\n\n    newTruck.save(err => {\n      if (err){\n        res.send(err);\n      }\n      res.json({message: 'Truck saved successfully'});\n    });\n  });\n\n  // '/v1/truck' - Read\n  // Returns the entire DB.\n  api.get('/', (req, res) => {\n    TruckName.find({}, (err, trucks) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(trucks);\n      console.log(trucks);\n    });\n  });\n\n  // '/v1/truck/:id' - Read 1\n  // Finds a truck by its id.\n  api.get('/:id', (req, res) => {\n    TruckName.findById(req.params.id, (err, truck) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(truck);\n    });\n  });\n\n\n  // '/v1/truck/:id' - Update\n  // Updates a truck.\n  // TODO: I'VE DISABLED AUTH TEMP, DON'T FORGET TO ENABLE\n  api.put('/update/:id', (req, res) => {\n    TruckName.findById(req.params.id, (err, truck) => {\n      if (err) {\n        res.send(err);\n      }\n      truck.name = req.body.name;\n\n      truck.save(err => {\n        if (err) {\n          res.send(err);\n        }\n        res.json({message: 'Truck info updated successfully'});\n      });\n    });\n  });\n\n  // '/v1/truck/:id' - Delete\n  // Deletes a truck from the DB\n  // TODO: I'VE DISABLED AUTH TEMP, DON'T FORGET TO ENABLE\n  api.delete('/:id', (req, res) => {\n    TruckName.findById(req.params.id, (err, truck) => {\n      if (err) {\n        res.status(505).send(err);\n        return;\n      }\n      if (truck === null) {\n        res.status(404).send(err);\n        return;\n      }\n      TruckName.remove({\n        _id: req.params.id\n      }, (err, TruckName) => {\n        if (err) {\n          res.send(err);\n        }\n        res.json({message: \"Truck successfully deleted\"});\n      });\n    });\n  });\n\n\n  return api;\n\n}\n"]}