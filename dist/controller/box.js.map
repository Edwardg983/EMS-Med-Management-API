{"version":3,"sources":["../../src/controller/box.js"],"names":["config","db","api","post","req","res","newBox","name","body","save","err","send","json","message","get","find","boxs","findById","params","id","box","put","delete","console","log","status","remove","_id","BoxName"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;kBAEc,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AAChC,MAAIC,MAAM,sBAAV;;AAEA;AACA;AACA;AACAA,MAAIC,IAAJ,CAAS,MAAT,EAAiB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7B,QAAIC,SAAS,uBAAb;;AAEAA,WAAOC,IAAP,GAAcH,IAAII,IAAJ,CAASD,IAAvB;AACAD,WAAOG,IAAP,CAAY,eAAO;AACjB,UAAIC,GAAJ,EAAQ;AACNL,YAAIM,IAAJ,CAASD,GAAT;AACD;AACDL,UAAIO,IAAJ,CAAS,EAACC,SAAS,wBAAV,EAAT;AACD,KALD;AAMD,GAVD;;AAYA;AACA;AACAX,MAAIY,GAAJ,CAAQ,GAAR,EAAa,UAACV,GAAD,EAAKC,GAAL,EAAa;AACxB,sBAAQU,IAAR,CAAa,EAAb,EAAiB,UAACL,GAAD,EAAMM,IAAN,EAAe;AAC9B,UAAIN,GAAJ,EAAS;AACPL,YAAIM,IAAJ,CAASD,GAAT;AACD;AACDL,UAAIO,IAAJ,CAASI,IAAT;AACD,KALD;AAMD,GAPD;;AASA;AACA;AACAd,MAAIY,GAAJ,CAAQ,MAAR,EAAgB,UAACV,GAAD,EAAMC,GAAN,EAAc;AAC5B,sBAAQY,QAAR,CAAiBb,IAAIc,MAAJ,CAAWC,EAA5B,EAAgC,UAACT,GAAD,EAAMU,GAAN,EAAc;AAC5C,UAAIV,GAAJ,EAAS;AACPL,YAAIM,IAAJ,CAASD,GAAT;AACD;AACDL,UAAIO,IAAJ,CAASQ,GAAT;AACD,KALD;AAMD,GAPD;;AAUA;AACA;AACA;AACAlB,MAAImB,GAAJ,CAAQ,aAAR,EAAuB,UAACjB,GAAD,EAAMC,GAAN,EAAc;AACnC,sBAAQY,QAAR,CAAiBb,IAAIc,MAAJ,CAAWC,EAA5B,EAAgC,UAACT,GAAD,EAAMU,GAAN,EAAc;AAC5C,UAAIV,GAAJ,EAAS;AACPL,YAAIM,IAAJ,CAASD,GAAT;AACD;AACDU,UAAIb,IAAJ,GAAWH,IAAII,IAAJ,CAASD,IAApB;;AAEAa,UAAIX,IAAJ,CAAS,eAAO;AACd,YAAIC,GAAJ,EAAS;AACPL,cAAIM,IAAJ,CAASD,GAAT;AACD;AACDL,YAAIO,IAAJ,CAAS,EAACC,SAAS,+BAAV,EAAT;AACD,OALD;AAMD,KAZD;AAaD,GAdD;;AAgBA;AACA;AACA;AACAX,MAAIoB,MAAJ,CAAW,MAAX,EAAmB,UAAClB,GAAD,EAAMC,GAAN,EAAc;AAC/BkB,YAAQC,GAAR,CAAYpB,IAAIc,MAAJ,CAAWC,EAAvB;AACA,sBAAQF,QAAR,CAAiBb,IAAIc,MAAJ,CAAWC,EAA5B,EAAgC,UAACT,GAAD,EAAMU,GAAN,EAAc;AAC5C,UAAIV,GAAJ,EAAS;AACPL,YAAIoB,MAAJ,CAAW,GAAX,EAAgBd,IAAhB,CAAqBD,GAArB;AACA;AACD;AACD,UAAIU,QAAQ,IAAZ,EAAkB;AAChBf,YAAIoB,MAAJ,CAAW,GAAX,EAAgBd,IAAhB,CAAqBD,GAArB;AACA;AACD;AACD,wBAAQgB,MAAR,CAAe;AACbC,aAAKvB,IAAIc,MAAJ,CAAWC;AADH,OAAf,EAEG,UAACT,GAAD,EAAMkB,OAAN,EAAkB;AACnB,YAAIlB,GAAJ,EAAS;AACPL,cAAIM,IAAJ,CAASD,GAAT;AACD;AACDL,YAAIO,IAAJ,CAAS,EAACC,SAAS,0BAAV,EAAT;AACD,OAPD;AAQD,KAjBD;AAkBD,GApBD;;AAuBA,SAAOX,GAAP;AAED,C","file":"box.js","sourcesContent":["import mongoose from 'mongoose';\nimport { Router } from 'express'\nimport BoxName from '../model/boxName'\nimport bodyParser from 'body-parser';\nimport passport from 'passport';\n\nimport { authenticate } from '../middleware/authMiddleware';\n\nexport default({ config, db }) => {\n  let api = Router();\n\n  // '/v1/box/add' - Create\n  // This function will add a new box to the DB.\n  // TODO: I'VE DISABLED AUTH TEMP, DON'T FORGET TO ENABLE\n  api.post('/add', (req, res) => {\n    let newBox = new BoxName();\n\n    newBox.name = req.body.name;\n    newBox.save(err => {\n      if (err){\n        res.send(err);\n      }\n      res.json({message: 'Box saved successfully'});\n    });\n  });\n\n  // '/v1/box' - Read\n  // Returns the entire DB.\n  api.get('/', (req,res) => {\n    BoxName.find({}, (err, boxs) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(boxs);\n    });\n  });\n\n  // '/v1/box/:id' - Read 1\n  // Finds a truck by its id.\n  api.get('/:id', (req, res) => {\n    BoxName.findById(req.params.id, (err, box) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(box);\n    });\n  });\n\n\n  // '/v1/box/:id' - Update\n  // Updates a box.\n  // TODO: I'VE DISABLED AUTH TEMP, DON'T FORGET TO ENABLE\n  api.put('/update/:id', (req, res) => {\n    BoxName.findById(req.params.id, (err, box) => {\n      if (err) {\n        res.send(err);\n      }\n      box.name = req.body.name;\n\n      box.save(err => {\n        if (err) {\n          res.send(err);\n        }\n        res.json({message: 'Box info updated successfully'});\n      });\n    });\n  });\n\n  // '/v1/box/:id' - Delete\n  // Deletes a truck from the DB\n  // TODO: I'VE DISABLED AUTH TEMP, DON'T FORGET TO ENABLE\n  api.delete('/:id', (req, res) => {\n    console.log(req.params.id);\n    BoxName.findById(req.params.id, (err, box) => {\n      if (err) {\n        res.status(505).send(err);\n        return;\n      }\n      if (box === null) {\n        res.status(404).send(err);\n        return;\n      }\n      BoxName.remove({\n        _id: req.params.id\n      }, (err, BoxName) => {\n        if (err) {\n          res.send(err);\n        }\n        res.json({message: \"Box successfully deleted\"});\n      });\n    });\n  });\n\n\n  return api;\n\n}\n"]}